<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Traffic Light Detection - Test App</title>
    <link rel="stylesheet" href="/static/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1 class="title">
                    <span class="icon">üö¶</span>
                    Traffic Light Detection
                </h1>
                <p class="subtitle">Ph√°t hi·ªán ƒë√®n giao th√¥ng th√¥ng minh v·ªõi AI</p>
            </div>
        </header>

        <!-- Mode Switcher -->
        <div class="mode-switcher">
            <button class="mode-btn active" data-mode="image">
                <span class="mode-icon">üì∑</span>
                <span class="mode-text">H√¨nh ·∫£nh</span>
            </button>
            <button class="mode-btn" data-mode="video">
                <span class="mode-icon">üé•</span>
                <span class="mode-text">Video</span>
            </button>
            <button class="mode-btn" data-mode="webcam">
                <span class="mode-icon">üìπ</span>
                <span class="mode-text">Webcam</span>
            </button>
        </div>

        <!-- Settings Panel -->
        <div class="settings-panel">
            <div class="setting-item">
                <label for="confidence">Ng∆∞·ª°ng tin c·∫≠y (Confidence): <span id="conf-value">0.25</span></label>
                <input type="range" id="confidence" min="0" max="1" step="0.05" value="0.25">
            </div>
            <div class="setting-item">
                <label for="iou">Ng∆∞·ª°ng IOU: <span id="iou-value">0.45</span></label>
                <input type="range" id="iou" min="0" max="1" step="0.05" value="0.45">
            </div>
        </div>

        <!-- Main Content Area -->
        <div class="content-wrapper">
            <!-- Image Mode -->
            <div class="mode-content active" id="image-mode">
                <div class="upload-area" id="image-upload-area">
                    <div class="upload-icon">üìÅ</div>
                    <h3>K√©o th·∫£, click ƒë·ªÉ ch·ªçn, ho·∫∑c paste ·∫£nh (Ctrl+V)</h3>
                    <p>H·ªó tr·ª£: JPG, PNG, BMP (T·ªëi ƒëa 10MB)</p>
                    <input type="file" id="image-input" accept="image/*" hidden>
                </div>
                <div class="preview-area" id="image-preview" style="display: none;">
                    <img id="preview-img" alt="Preview">
                    <button class="btn-remove" id="remove-image">‚úï</button>
                </div>
                <button class="btn-detect" id="detect-image" style="display: none;">
                    <span class="btn-text">Ph√°t hi·ªán ƒë√®n giao th√¥ng</span>
                    <span class="btn-loader" style="display: none;">‚è≥</span>
                </button>
            </div>

            <!-- Video Mode -->
            <div class="mode-content" id="video-mode">
                <div class="upload-area" id="video-upload-area">
                    <div class="upload-icon">üé¨</div>
                    <h3>K√©o th·∫£ ho·∫∑c click ƒë·ªÉ ch·ªçn video</h3>
                    <p>H·ªó tr·ª£: MP4, AVI, MOV, MKV</p>
                    <input type="file" id="video-input" accept="video/*" hidden>
                </div>
                <div class="preview-area" id="video-preview" style="display: none;">
                    <video id="preview-video" controls></video>
                    <button class="btn-remove" id="remove-video">‚úï</button>
                </div>
                <button class="btn-detect" id="detect-video" style="display: none;">
                    <span class="btn-text">X·ª≠ l√Ω video</span>
                    <span class="btn-loader" style="display: none;">‚è≥</span>
                </button>
                <div class="progress-bar" id="video-progress" style="display: none;">
                    <div class="progress-fill"></div>
                    <span class="progress-text">ƒêang x·ª≠ l√Ω...</span>
                </div>
            </div>

            <!-- Webcam Mode -->
            <div class="mode-content" id="webcam-mode">
                <div class="webcam-container">
                    <video id="webcam-video" autoplay playsinline></video>
                    <canvas id="webcam-canvas"></canvas>
                </div>
                <div class="webcam-controls">
                    <button class="btn-webcam" id="start-webcam">
                        <span class="btn-icon">‚ñ∂Ô∏è</span>
                        <span class="btn-text">B·∫Øt ƒë·∫ßu</span>
                    </button>
                    <button class="btn-webcam stop" id="stop-webcam" style="display: none;">
                        <span class="btn-icon">‚èπÔ∏è</span>
                        <span class="btn-text">D·ª´ng l·∫°i</span>
                    </button>
                    <div class="fps-counter" id="fps-counter" style="display: none;">FPS: <span>0</span></div>
                </div>
            </div>
        </div>

        <!-- Results Area -->
        <div class="results-area" id="results-area" style="display: none;">
            <h2 class="results-title">K·∫øt qu·∫£ ph√°t hi·ªán</h2>
            <div class="results-content">
                <div class="result-image-container">
                    <img id="result-image" alt="Detection Result">
                    <video id="result-video" controls style="display: none;"></video>
                </div>
                <div class="result-info">
                    <div class="info-card">
                        <div class="info-label">S·ªë l∆∞·ª£ng ph√°t hi·ªán</div>
                        <div class="info-value" id="detection-count">0</div>
                    </div>
                    <div class="detections-list" id="detections-list"></div>
                </div>
            </div>
        </div>

        <!-- Status Messages -->
        <div class="status-message" id="status-message"></div>
    </div>

    <script src="/static/app.js"></script>
</body>

</html>